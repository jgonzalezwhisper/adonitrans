{"version":3,"file":"login-ajax.js","sources":["login-ajax.js"],"sourcesContent":["jQuery(document).ready(function($) {\r\n\r\n    $('#custom-login-form input:not(\"#custom_login_nonce\")').text('').val('');\r\n\r\n    // Manejar la lógica para el inicio de sesión\r\n    $('#custom-login-form').submit(function(event) {\r\n        event.preventDefault();\r\n\r\n        // Verificar si el campo de token está visible\r\n        if ($('#token-section').is(\":visible\")) {\r\n            var token = $('#user_token').val(); // Obtener el token ingresado por el usuario\r\n\r\n            // Enviar el token por AJAX para validarlo\r\n            $.ajax({\r\n                url: loginAjax.ajaxurl,\r\n                type: 'POST',\r\n                data: {\r\n                    action: 'validate_token',\r\n                    token: token\r\n                },\r\n                success: function(response) {\r\n                    if (response.success) {\r\n                        // Si el token es válido, iniciar sesión\r\n                        Swal.fire({\r\n                            title: '¡Bienvenido!',\r\n                            text: 'Inicio de sesión exitoso.',\r\n                            icon: 'success',\r\n                            confirmButtonText: 'Ir al Panel'\r\n                        }).then(function() {\r\n                            window.location.href = response.data.redirect_url; \r\n                        });\r\n                    } else {\r\n                        Swal.fire({\r\n                            title: 'Error',\r\n                            text: response.data.message,\r\n                            icon: 'error',\r\n                            confirmButtonText: 'Intentar de nuevo'\r\n                        });\r\n                    }\r\n                },\r\n                error: function() {\r\n                    Swal.fire({\r\n                        title: 'Error',\r\n                        text: 'Hubo un error al procesar la solicitud.',\r\n                        icon: 'error',\r\n                        confirmButtonText: 'Intentar de nuevo'\r\n                    });\r\n                }\r\n            });\r\n        } else {\r\n            // Si el campo de token no está visible, proceder con el inicio de sesión normal\r\n            var email = $('#user_email').val();\r\n            var password = $('#user_password').val();\r\n            var nonce = $('#custom_login_nonce').val(); // Obtener el nonce\r\n\r\n            // Mostrar loading\r\n            Swal.fire({\r\n                title: 'Cargando...',\r\n                text: 'Iniciando sesión...',\r\n                allowOutsideClick: false,\r\n                didOpen: () => {\r\n                    Swal.showLoading();\r\n                }\r\n            });\r\n\r\n            // Enviar datos con AJAX\r\n            $.ajax({\r\n                url: loginAjax.ajaxurl,\r\n                type: 'POST',\r\n                data: {\r\n                    action: 'custom_user_login',\r\n                    email: email,\r\n                    password: password,\r\n                    custom_login_nonce: nonce\r\n                },\r\n                success: function(response) {\r\n                    Swal.close(); // Cerrar el loading\r\n\r\n                    if (response.success) {\r\n                        // Si los datos son correctos, mostrar el campo para el token\r\n                        $('#token-section').show();\r\n                    } else {\r\n                        Swal.fire({\r\n                            title: 'Error',\r\n                            text: response.data.message,\r\n                            icon: 'error',\r\n                            confirmButtonText: 'Intentar de nuevo'\r\n                        });\r\n                    }\r\n                },\r\n                error: function() {\r\n                    Swal.close();\r\n                    Swal.fire({\r\n                        title: 'Error',\r\n                        text: 'Hubo un error al procesar la solicitud.',\r\n                        icon: 'error',\r\n                        confirmButtonText: 'Intentar de nuevo'\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    });  \r\n});"],"names":["jQuery","document","ready","$","text","val","submit","event","password","nonce","preventDefault","is","token","ajax","url","loginAjax","ajaxurl","type","data","action","success","response","Swal","fire","title","icon","confirmButtonText","then","window","location","href","redirect_url","message","error","email","allowOutsideClick","didOpen","showLoading","custom_login_nonce","close","show"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,SAASC,GAE5BA,EAAE,qDAAqD,EAAEC,KAAK,EAAE,EAAEC,IAAI,EAAE,EAGxEF,EAAE,oBAAoB,EAAEG,OAAO,SAASC,GAIpC,IA2CQC,EACAC,EA/CRF,EAAMG,eAAe,EAGjBP,EAAE,gBAAgB,EAAEQ,GAAG,UAAU,GAC7BC,EAAQT,EAAE,aAAa,EAAEE,IAAI,EAGjCF,EAAEU,KAAK,CACHC,IAAKC,UAAUC,QACfC,KAAM,OACNC,KAAM,CACFC,OAAQ,iBACRP,MAAOA,CACX,EACAQ,QAAS,SAASC,GACVA,EAASD,QAETE,KAAKC,KAAK,CACNC,MAAO,eACPpB,KAAM,4BACNqB,KAAM,UACNC,kBAAmB,aACvB,CAAC,EAAEC,KAAK,WACJC,OAAOC,SAASC,KAAOT,EAASH,KAAKa,YACzC,CAAC,EAEDT,KAAKC,KAAK,CACNC,MAAO,QACPpB,KAAMiB,EAASH,KAAKc,QACpBP,KAAM,QACNC,kBAAmB,mBACvB,CAAC,CAET,EACAO,MAAO,WACHX,KAAKC,KAAK,CACNC,MAAO,QACPpB,KAAM,0CACNqB,KAAM,QACNC,kBAAmB,mBACvB,CAAC,CACL,CACJ,CAAC,IAGGQ,EAAQ/B,EAAE,aAAa,EAAEE,IAAI,EAC7BG,EAAWL,EAAE,gBAAgB,EAAEE,IAAI,EACnCI,EAAQN,EAAE,qBAAqB,EAAEE,IAAI,EAGzCiB,KAAKC,KAAK,CACNC,MAAO,cACPpB,KAAM,sBACN+B,kBAAmB,CAAA,EACnBC,QAAS,KACLd,KAAKe,YAAY,CACrB,CACJ,CAAC,EAGDlC,EAAEU,KAAK,CACHC,IAAKC,UAAUC,QACfC,KAAM,OACNC,KAAM,CACFC,OAAQ,oBACRe,MAAOA,EACP1B,SAAUA,EACV8B,mBAAoB7B,CACxB,EACAW,QAAS,SAASC,GACdC,KAAKiB,MAAM,EAEPlB,EAASD,QAETjB,EAAE,gBAAgB,EAAEqC,KAAK,EAEzBlB,KAAKC,KAAK,CACNC,MAAO,QACPpB,KAAMiB,EAASH,KAAKc,QACpBP,KAAM,QACNC,kBAAmB,mBACvB,CAAC,CAET,EACAO,MAAO,WACHX,KAAKiB,MAAM,EACXjB,KAAKC,KAAK,CACNC,MAAO,QACPpB,KAAM,0CACNqB,KAAM,QACNC,kBAAmB,mBACvB,CAAC,CACL,CACJ,CAAC,EAET,CAAC,CACL,CAAC"}