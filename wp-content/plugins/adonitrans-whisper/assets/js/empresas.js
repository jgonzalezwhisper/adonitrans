function r(){jQuery("#table-empresas").DataTable({language:{url:"https://cdn.datatables.net/plug-ins/1.11.5/i18n/es-ES.json"}}),jQuery("#administradores_empresa").select2({placeholder:"Selecciona un Valor",allowClear:!0,width:"100%"})}jQuery(document).ready(function(t){t(document).on("click","#crear-empresa",function(e){e.preventDefault(),t("#empresa-form")[0].reset(),t('#wrap-empresas .wrap-gestion-empresas button[type="submit"]').text("Crear Empresa"),t("#wrap-empresas .wrap-listado-empresas").hide(),t("#wrap-empresas .wrap-gestion-empresas").show()}),t(document).on("click","#wrap-empresas .wrap-gestion-empresas #cancelar-empresa-btn",function(e){t("#empresa-form")[0].reset(),t("#empresa-id").text("").val(""),t("#administradores_empresa").val(null).trigger("change"),t(".select2-selection__clear").remove(),t(".centro-costo:gt(0)").remove(),t(".centro-costo input").val(""),t("#wrap-empresas .wrap-gestion-empresas").hide(),t("#wrap-empresas .wrap-listado-empresas").show()}),t(document).on("click","#wrap-empresas .wrap-listado-empresas .edit-empresa",function(e){t('#wrap-empresas .wrap-gestion-empresas button[type="submit"]').text("Editar Empresa"),t("#wrap-empresas .wrap-gestion-empresas .title").text("Editar Empresa"),t("#wrap-empresas .wrap-listado-empresas").hide(),t("#wrap-empresas .wrap-gestion-empresas").show();var a=t(this).data("id");t("#empresa-form #empresa-id").val(a),t("body").addClass("actloader"),t.ajax({url:empresaAjax.ajaxurl,method:"POST",data:{action:"load_empresa_data",post_id:a},success:function(e){e.success?(t.each(e.data,function(e,a){var r;"administradores_empresa"===e?(r=a.map(function(e){return e.ID}),t("#administradores_empresa").val(r).trigger("change")):"estado_de_la_empresa"===e?t("#"+e).val(a).trigger("change"):"centros_de_costos_empresa"===e&&"administradores_empresa"===e||t("#"+e).val(a)}),e.data.centros_de_costos_empresa&&0<e.data.centros_de_costos_empresa.length&&t.each(e.data.centros_de_costos_empresa,function(e,a){var r=t(".centro-costo").first().clone();r.find("label").attr("for","nombre-"+e),r.find('input[name="codigo_centro[]"]').val(a.codigo).attr("id","codigo-"+e).attr("name","codigo_centro[]"),r.find('input[name="nombre_centro[]"]').val(a.nombre).attr("id","nombre-"+e).attr("name","nombre_centro[]"),t(".wrap-datos").append(r)}),t(".centro-costo").first().remove(),t("body").removeClass("actloader")):(t("body").removeClass("actloader"),Swal.fire({title:"Algo ha ocurrido!",text:e.data.message,icon:"error",confirmButtonText:"Aceptar"}))}})}),t(document).on("click","#wrap-empresas .wrap-listado-empresas .delete-empresa",function(e){e.preventDefault();let a=t(this).data("id");Swal.fire({title:"¿Estás seguro?",text:"Esta acción eliminará la Empresa de forma permanente.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&t.ajax({url:empresaAjax.ajaxurl,method:"POST",data:{action:"delete_empresa",post_id:a},success:function(e){e.success?Swal.fire("¡Eliminado!","El empresa ha sido eliminado exitosamente.","success").then(()=>{var e=empresaAjax.plugin_url+"includes/parts/panel/empresa.php";t.ajax({url:e,method:"GET",success:function(e){t("#informacion").html(e),r()},error:function(){t("#informacion").html("<p>Error al cargar el contenido. Intenta nuevamente.</p>")}})}):Swal.fire("Error",e.data.message||"No se pudo eliminar el vehículo.","error")},error:function(){Swal.fire("Error","Hubo un problema al intentar eliminar el vehículo.","error")}})})}),t(document).on("click","#add-centro-row",function(e){e.preventDefault();var e=t(".wrap-datos .centro-costo").length,a=t(".centro-costo").last().clone();a.find("label").attr("for","centro-costo-"+e),a.find("input").val("").attr("id","centro-costo-"+e),a.find(".remove-payment-row").remove(),t(".wrap-datos").append(a)}),t(document).on("click",".remove-centro-row",function(e){e.preventDefault();var e=t(".wrap-datos"),a=t(this).closest(".centro-costo");1<e.find(".centro-costo").length?a.remove():Swal.fire({icon:"warning",title:"No se puede eliminar",text:"Debe haber al menos una franja horaria configurada",confirmButtonText:"Entendido"})});let a={pdf:"https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg",doc:"https://es.wikipedia.org/wiki/Archivo:Microsoft_Office_Word_(2019%E2%80%93present).svg",docx:"https://es.wikipedia.org/wiki/Archivo:Microsoft_Office_Word_(2019%E2%80%93present).svg",xls:"https://upload.wikimedia.org/wikipedia/commons/3/34/Microsoft_Office_Excel_%282019%E2%80%93present%29.svg",xlsx:"https://upload.wikimedia.org/wikipedia/commons/3/34/Microsoft_Office_Excel_%282019%E2%80%93present%29.svg",default:"https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg"};t(document).on("click","#add-documento",function(e){e.preventDefault();e=`
                <div class="document-row">
                    <input type="file" name="documentos_de_la_empresa[][documento]" class="documento-input">
                    <img src="${a.default}" alt="Icono del archivo" class="document-icon" style="width: 32px; height: 32px;">
                    <button type="button" class="button remove-documento">Eliminar</button>
                </div>
            `;t("#documentos-container").append(e)}),t(document).on("change",".documento-input",function(){var e=this.files[0];e&&(e=e.name.split(".").pop().toLowerCase(),e=a[e]||a.default,t(this).siblings(".document-icon").attr("src",e))}),t(document).on("click",".remove-documento",function(){t(this).closest(".document-row").remove()}),t(document).on("focusin","#empresa-form",function(){t(this).validate({rules:{estado_de_la_empresa:{required:!0},nombre_empresa:{required:!0},administradores_empresa:{required:!0}},messages:{estado_de_la_empresa:"Esta información es necesaria",nombre_empresa:"Esta información es necesaria",administradores_empresa:"Esta información es necesaria"},submitHandler:function(e){e=new FormData(e);e.append("action","create_empresa"),t.ajax({url:empresaAjax.ajaxurl,type:"POST",data:e,contentType:!1,processData:!1,beforeSend:function(){t("body").addClass("actloader")},success:function(e){t("body").removeClass("actloader"),e.success?Swal.fire({title:"¡Éxito!",text:e.data.message,icon:"success",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&(t("#empresa-form")[0].reset(),e=empresaAjax.plugin_url+"includes/parts/panel/empresa.php",t.ajax({url:e,method:"GET",success:function(e){t("#informacion").html(e),r()},error:function(){t("#informacion").html("<p>Error al cargar el contenido. Intenta nuevamente.</p>")}}))}):Swal.fire({title:"Algo ha ocurrido!",text:e.data.message,icon:"error",confirmButtonText:"Aceptar"})},error:function(){t("body").removeClass("actloader"),Swal.fire({title:"¡Error!",text:"Hubo un problema al procesar el formulario. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}})}})})});
//# sourceMappingURL=empresas.js.map
