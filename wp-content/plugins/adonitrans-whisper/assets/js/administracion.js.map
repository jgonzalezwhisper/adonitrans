{"version":3,"file":"administracion.js","sources":["administracion.js"],"sourcesContent":["jQuery(document).ready(function($) {\r\n\r\n    $(document).on('click', '.adonitrans-tabs-nav li', function(event) {\r\n        var tabId = $(this).data(\"tab\");\r\n\r\n        $(\".adonitrans-tabs-nav li\").removeClass(\"active\");\r\n        $(this).addClass(\"active\");\r\n        $(\".tab-content\").removeClass(\"active\");\r\n        $(\"#\" + tabId).addClass(\"active\");\r\n    });\r\n\r\n    /*FRANJA HORARIA*/\r\n    $(document).on('click', '#add-franja-row', function(e) {\r\n        e.preventDefault();\r\n\r\n        var franjaCount = $('#wrap-franjas .franja').length;\r\n\r\n        var newRow = $('.franja').last().clone();\r\n\r\n        newRow.find('label').attr('for', 'franja-' + franjaCount);\r\n        newRow.find('input').val('').attr('id', 'franja-' + franjaCount);\r\n\r\n        newRow.find('.remove-payment-row').remove();\r\n\r\n        $('#wrap-franjas').append(newRow);\r\n    });\r\n\r\n    $(document).on('click', '.remove-franja-row', function(e) {\r\n        e.preventDefault();\r\n\r\n        var $wrapFranjas = $('#wrap-franjas');\r\n        var $franja = $(this).closest('.franja');\r\n\r\n        if ($wrapFranjas.find('.franja').length > 1) {\r\n            $franja.remove();\r\n        } else {\r\n            Swal.fire({\r\n                icon: 'warning',\r\n                title: 'No se puede eliminar',\r\n                text: 'Debe haber al menos una franja horaria configurada',\r\n                confirmButtonText: 'Entendido'\r\n            });\r\n        }\r\n    });\r\n\r\n\r\n    /*TARIFAS DESCUENTOS*/\r\n    $(document).on('click', '#add-tarifa-row', function(e) {\r\n        e.preventDefault();\r\n\r\n        var franjaCount = $('#wrap-tarifas .row-tarifa').length;\r\n\r\n        var newRow = $('.row-tarifa').last().clone();\r\n\r\n        newRow.find('label').attr('for', 'franja-' + franjaCount);\r\n        newRow.find('input').val('').attr('id', 'franja-' + franjaCount);\r\n\r\n        /*newRow.find('.remove-tarifa-row').remove();\r\n        newRow.append('<button type=\"button\" class=\"button remove-tarifa-row\">Eliminar Tarifa</button>');*/\r\n\r\n        $('#wrap-tarifas').append(newRow);\r\n    });\r\n\r\n    $(document).on('click', '.remove-tarifa-row', function(e) {\r\n        e.preventDefault();\r\n\r\n        var $wrapTarifas = $('#wrap-tarifas');\r\n        var $rowTarifa = $(this).closest('.row-tarifa');\r\n\r\n        if ($wrapTarifas.find('.row-tarifa').length > 1) {\r\n            $rowTarifa.remove();\r\n        } else {\r\n            Swal.fire({\r\n                icon: 'warning',\r\n                title: 'No se puede eliminar',\r\n                text: 'Debe haber al menos una tarifa configurada',\r\n                confirmButtonText: 'Entendido'\r\n            });\r\n        }\r\n    });\r\n\r\n    // Enviar formulario vía AJAX\r\n    $(document).on('focusin', '#ajustes-generales', function() {\r\n        $(this).validate({\r\n            rules: {\r\n                // Validación general para campos específicos\r\n                'franjas_horas_trabajo[][nombre]': {\r\n                    required: true,\r\n                    minlength: 3,\r\n                    maxlength: 50,\r\n                },\r\n                'franjas_horas_trabajo[][hora_inicio]': {\r\n                    required: true,\r\n                    time24: true, // Validación personalizada para formato 24 horas\r\n                },\r\n                'franjas_horas_trabajo[][hora_fin]': {\r\n                    required: true,\r\n                    time24: true, // Validación personalizada para formato 24 horas\r\n                },\r\n            },\r\n            messages: {\r\n                'franjas_horas_trabajo[][nombre]': {\r\n                    required: 'El nombre de la franja es obligatorio.',\r\n                    minlength: 'El nombre debe tener al menos 3 caracteres.',\r\n                    maxlength: 'El nombre no puede tener más de 50 caracteres.',\r\n                },\r\n                'franjas_horas_trabajo[][hora_inicio]': {\r\n                    required: 'La hora de inicio es obligatoria.',\r\n                    time24: 'Ingrese una hora válida en formato 24 horas (HH:mm).',\r\n                },\r\n                'franjas_horas_trabajo[][hora_fin]': {\r\n                    required: 'La hora de fin es obligatoria.',\r\n                    time24: 'Ingrese una hora válida en formato 24 horas (HH:mm).',\r\n                },\r\n            },\r\n            // Validación personalizada para formato 24 horas\r\n            submitHandler: function(form) {\r\n                var formData = new FormData(form);\r\n                formData.append('action', 'update_generales');\r\n\r\n                // Petición AJAX\r\n                $.ajax({\r\n                    url: administracionAjax.ajaxurl,\r\n                    type: 'POST',\r\n                    data: formData,\r\n                    contentType: false,\r\n                    processData: false,\r\n                    beforeSend: function() {\r\n                        $('body').addClass('actloader');\r\n                    },\r\n                    success: function(response) {\r\n                        $('body').removeClass('actloader');\r\n                        if (response.success) {\r\n                            Swal.fire({\r\n                                title: '¡Éxito!',\r\n                                text: response.data.message,\r\n                                icon: 'success',\r\n                                confirmButtonText: 'Aceptar',\r\n                            }).then((result) => {\r\n                                if (result.isConfirmed) {\r\n                                    $('#ajustes-generales')[0].reset();\r\n\r\n                                    $.ajax({\r\n                                        url: administracionAjax.plugin_url + 'includes/parts/panel/administracion.php',\r\n                                        method: 'GET',\r\n                                        success: function(response) {\r\n                                            $('#informacion').html(response);\r\n                                        },\r\n                                        error: function() {\r\n                                            $('#informacion').html('<p>Error al cargar el contenido. Intenta nuevamente.</p>');\r\n                                        },\r\n                                    });\r\n                                }\r\n                            });\r\n                        } else {\r\n                            Swal.fire({\r\n                                title: 'Algo ha ocurrido!',\r\n                                text: response.data.message,\r\n                                icon: 'error',\r\n                                confirmButtonText: 'Aceptar',\r\n                            });\r\n                        }\r\n                    },\r\n                    error: function() {\r\n                        $('body').removeClass('actloader');\r\n                        Swal.fire({\r\n                            title: '¡Error!',\r\n                            text: 'Hubo un problema al procesar el formulario. Por favor intenta nuevamente.',\r\n                            icon: 'error',\r\n                            confirmButtonText: 'Aceptar',\r\n                        });\r\n                    },\r\n                });\r\n            },\r\n        });\r\n    });\r\n\r\n    // Evento submit para prevenir el comportamiento por defecto y enviar correctamente\r\n    $(document).on('submit', '#ajustes-generales', function(e) {\r\n        e.preventDefault();\r\n        if ($(this).valid()) {\r\n            $(this).submit();\r\n        }\r\n    });\r\n\r\n});"],"names":["jQuery","document","ready","$","on","event","tabId","this","data","removeClass","addClass","e","preventDefault","franjaCount","length","newRow","last","clone","find","attr","val","remove","append","$wrapFranjas","$franja","closest","Swal","fire","icon","title","text","confirmButtonText","$wrapTarifas","$rowTarifa","validate","rules","franjas_horas_trabajo[][nombre]","required","minlength","maxlength","franjas_horas_trabajo[][hora_inicio]","time24","franjas_horas_trabajo[][hora_fin]","messages","submitHandler","form","formData","FormData","ajax","url","administracionAjax","ajaxurl","type","contentType","processData","beforeSend","success","response","message","then","result","isConfirmed","reset","plugin_url","method","html","error","valid","submit"],"mappings":"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"}