{"version":3,"file":"vehiculos.js","sources":["vehiculos.js"],"sourcesContent":["jQuery(document).ready(function($) {\r\n\r\n    $(document).on('click', '#crear-vehiculo', function(event) {\r\n        event.preventDefault();\r\n\r\n        $('#vehiculo-form')[0].reset();\r\n        $('#wrap-vehiculos .wrap-gestion-vehiculos button[type=\"submit\"]').text('Crear Vehículo');\r\n\r\n        $(\"#wrap-vehiculos .wrap-listado-vehiculos\").hide();\r\n        $(\"#wrap-vehiculos .wrap-gestion-vehiculos\").show();\r\n    });\r\n\r\n    $(document).on('click', '#wrap-vehiculos .wrap-gestion-vehiculos button[type=\"button\"]', function(event) {\r\n        $('#vehiculo-form')[0].reset();\r\n        $(\"#vehiculo-id\").text('').val('');\r\n        $('#select-rolesusuario').val(null).trigger('change');\r\n        $(\"#wrap-vehiculos .wrap-gestion-vehiculos\").hide();\r\n        $(\"#wrap-vehiculos .wrap-listado-vehiculos\").show();\r\n    });\r\n\r\n    $(document).on('click', '#wrap-vehiculos .wrap-listado-vehiculos .edit-vehiculo', function(event) {\r\n\r\n        $('#wrap-vehiculos .wrap-gestion-vehiculos button[type=\"submit\"]').text('Editar Vehículo');\r\n        $('#wrap-vehiculos .wrap-gestion-vehiculos .title').text('Editar Vehículo');\r\n        $(\"#wrap-vehiculos .wrap-listado-vehiculos\").hide();\r\n        $(\"#wrap-vehiculos .wrap-gestion-vehiculos\").show();\r\n\r\n        let post_id = $(this).data('id');\r\n        $(\"#vehiculo-form #vehiculo-id\").val(post_id);\r\n        $('body').addClass('actloader');\r\n\r\n        // Enviar la solicitud AJAX para obtener los datos del usuario\r\n        $.ajax({\r\n            url: vehiculoAjax.ajaxurl,\r\n            method: 'POST',\r\n            data: {\r\n                action: 'load_vehiculo_data',\r\n                post_id: post_id\r\n            },\r\n            success: function(response) {\r\n                if (response.success) {\r\n                    $.each(response.data, function(key, value) {\r\n                        if (key === 'tipo_de_vehiculo' || key === 'propietario_de_vehiculo' || key === 'conductor_del_vehiculo') {\r\n                            $('#' + key).val(value).trigger('change');\r\n                        } else {\r\n                            $('#' + key).val(value);\r\n                        }\r\n                    });\r\n                    $('body').removeClass('actloader');\r\n                } else {\r\n                    $('body').removeClass('actloader');\r\n                    Swal.fire({\r\n                        title: 'Algo ha ocurrido!',\r\n                        text: response.data.message,\r\n                        icon: 'error',\r\n                        confirmButtonText: 'Aceptar'\r\n                    });\r\n                }\r\n            }\r\n\r\n        });\r\n    });\r\n\r\n    $(document).on('click', '#wrap-vehiculos .wrap-listado-vehiculos .delete-vehiculo', function(event) {\r\n        event.preventDefault();\r\n\r\n        // Obtener el ID del usuario desde el botón\r\n        let vehiculoid = $(this).data('id');\r\n\r\n        // Mostrar la confirmación con SweetAlert\r\n        Swal.fire({\r\n            title: '¿Estás seguro?',\r\n            text: 'Esta acción eliminará el Vehículo de forma permanente.',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Sí, eliminar',\r\n            cancelButtonText: 'Cancelar'\r\n        }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                // Si el usuario confirma, realiza la solicitud AJAX\r\n                $.ajax({\r\n                    url: vehiculoAjax.ajaxurl, // La URL de admin-ajax.php en WordPress\r\n                    method: 'POST',\r\n                    data: {\r\n                        action: 'delete_vehiculo', // Acción personalizada en WordPress\r\n                        post_id: vehiculoid\r\n                    },\r\n                    success: function(response) {\r\n                        if (response.success) {\r\n                            // Mostrar mensaje de éxito\r\n                            Swal.fire(\r\n                                '¡Eliminado!',\r\n                                'El vehiculo ha sido eliminado exitosamente.',\r\n                                'success'\r\n                            ).then(() => {\r\n                                var fileUrl = vehiculoAjax.plugin_url + \"includes/parts/panel/vehiculo.php\";\r\n\r\n                                $.ajax({\r\n                                    url: fileUrl,\r\n                                    method: \"POST\",\r\n                                    data: {\r\n                                        action: 'render_html_panel',\r\n                                    },\r\n                                    success: function(response) {\r\n                                        $(\"#informacion\").html(response);\r\n                                        initVehiculos();\r\n                                    },\r\n                                    error: function() {\r\n                                        $(\"#informacion\").html(\"<p>Error al cargar el contenido. Intenta nuevamente.</p>\");\r\n                                    }\r\n                                });\r\n                            });\r\n\r\n                        } else {\r\n                            // Mostrar mensaje de error\r\n                            Swal.fire(\r\n                                'Error',\r\n                                response.data.message || 'No se pudo eliminar el vehículo.',\r\n                                'error'\r\n                            );\r\n                        }\r\n                    },\r\n                    error: function() {\r\n                        // Mostrar mensaje de error si AJAX falla\r\n                        Swal.fire(\r\n                            'Error',\r\n                            'Hubo un problema al intentar eliminar el vehículo.',\r\n                            'error'\r\n                        );\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    });\r\n\r\n    /*ENVIO Y VALIDACION DE FORMULARIO*/\r\n    $(document).on('focusin', '#vehiculo-form', function() {\r\n\r\n        $(this).validate({\r\n            rules: {\r\n                placa_vehiculo: {\r\n                    required: true,\r\n                },\r\n                tipo_de_vehiculo: {\r\n                    required: true,\r\n                },\r\n                modelo_vehiculo: {\r\n                    required: true,\r\n                },\r\n                cantidad_pasajeros_vehiculo: {\r\n                    required: true,\r\n                    number: true,\r\n                },\r\n                marca_vehiculo: {\r\n                    required: true,\r\n                },\r\n                serial_vehiculo: {\r\n                    required: true,\r\n                },\r\n                chasis_vehiculo: {\r\n                    required: true,\r\n                },\r\n                fecha_vencimiento_soat: {\r\n                    required: true,\r\n                },\r\n                fecha_vencimiento_tecno_mecanica: {\r\n                    required: true,\r\n                },\r\n                propietario_de_vehiculo: {\r\n                    required: true,\r\n                },\r\n                conductor_del_vehiculo: {\r\n                    required: true,\r\n                },\r\n            },\r\n            messages: {\r\n                placa_vehiculo: \"Ingresa la placa del Vehículo\",\r\n                tipo_de_vehiculo: \"Ingresa el tipo del Vehículo\",\r\n                modelo_vehiculo: \"Ingresa el modelo del Vehículo\",\r\n                cantidad_pasajeros_vehiculo: {\r\n                    required: \"Ingresa la cantidad del Vehículo\",\r\n                    number: \"La cantidad debe ser en números\"\r\n                },\r\n                marca_vehiculo: \"Ingresa la marca del Vehículo\",\r\n                serial_vehiculo: \"Ingresa el # de serial del Vehículo\",\r\n                chasis_vehiculo: \"Ingresa el # de chasis del Vehículo\",\r\n                fecha_vencimiento_soat: {\r\n                    required: 'Este campo es obligatorio',\r\n                },\r\n                fecha_vencimiento_tecno_mecanica: {\r\n                    required: 'Este campo es obligatorio',\r\n                },\r\n                propietario_de_vehiculo: \"Ingresa el Propietario del Vehículo\",\r\n                conductor_del_vehiculo: \"Ingresa el Conductor del Vehículo\",\r\n            },\r\n            submitHandler: function(form) {\r\n\r\n                // Recoger los datos del formulario\r\n                var formData = new FormData(form);\r\n                formData.append('action', 'create_vehiculo');\r\n\r\n                // Realizar la petición AJAX\r\n                $.ajax({\r\n                    url: vehiculoAjax.ajaxurl, // Ruta del endpoint AJAX\r\n                    type: 'POST',\r\n                    data: formData,\r\n                    contentType: false,\r\n                    processData: false,\r\n                    beforeSend: function() {\r\n                        $('body').addClass('actloader');\r\n                    },\r\n                    success: function(response) {\r\n                        $('body').removeClass('actloader');\r\n                        if (response.success) {\r\n                            Swal.fire({\r\n                                title: '¡Éxito!',\r\n                                text: response.data.message,\r\n                                icon: 'success',\r\n                                confirmButtonText: 'Aceptar',\r\n                            }).then((result) => {\r\n                                if (result.isConfirmed) {\r\n                                    // Reiniciar formulario\r\n                                    $('#vehiculo-form')[0].reset();\r\n\r\n                                    // Cargar nuevo contenido\r\n                                    var fileUrl =\r\n                                        vehiculoAjax.plugin_url +\r\n                                        'includes/parts/panel/vehiculo.php';\r\n\r\n                                    $.ajax({\r\n                                        url: fileUrl,\r\n                                        method: \"POST\",\r\n                                        data: {\r\n                                            action: 'render_html_panel',\r\n                                        },\r\n                                        success: function(response) {\r\n                                            $('#informacion').html(response);\r\n                                            initVehiculos();\r\n                                        },\r\n                                        error: function() {\r\n                                            $('#informacion').html(\r\n                                                '<p>Error al cargar el contenido. Intenta nuevamente.</p>'\r\n                                            );\r\n                                        },\r\n                                    });\r\n                                }\r\n                            });\r\n                        } else {\r\n                            Swal.fire({\r\n                                title: 'Algo ha ocurrido!',\r\n                                text: response.data.message,\r\n                                icon: 'error',\r\n                                confirmButtonText: 'Aceptar',\r\n                            });\r\n                        }\r\n                    },\r\n                    error: function() {\r\n                        $('body').removeClass('actloader');\r\n                        Swal.fire({\r\n                            title: '¡Error!',\r\n                            text: 'Hubo un problema al procesar el formulario. Por favor intenta nuevamente.',\r\n                            icon: 'error',\r\n                            confirmButtonText: 'Aceptar',\r\n                        });\r\n                    },\r\n                });\r\n            },\r\n        });\r\n    });\r\n});"],"names":["jQuery","document","ready","$","on","event","preventDefault","reset","text","hide","show","val","trigger","let","post_id","this","data","addClass","ajax","url","vehiculoAjax","ajaxurl","method","action","success","response","each","key","value","removeClass","Swal","fire","title","message","icon","confirmButtonText","vehiculoid","showCancelButton","confirmButtonColor","cancelButtonColor","cancelButtonText","then","result","isConfirmed","fileUrl","plugin_url","html","initVehiculos","error","validate","rules","placa_vehiculo","required","tipo_de_vehiculo","modelo_vehiculo","cantidad_pasajeros_vehiculo","number","marca_vehiculo","serial_vehiculo","chasis_vehiculo","fecha_vencimiento_soat","fecha_vencimiento_tecno_mecanica","propietario_de_vehiculo","conductor_del_vehiculo","messages","submitHandler","form","formData","FormData","append","type","contentType","processData","beforeSend"],"mappings":"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"}