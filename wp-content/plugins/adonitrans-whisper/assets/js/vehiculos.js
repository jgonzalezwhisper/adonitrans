jQuery(document).ready(function(a){a(document).on("click","#crear-vehiculo",function(e){e.preventDefault(),a("#vehiculo-form")[0].reset(),a('#wrap-vehiculos .wrap-gestion-vehiculos button[type="submit"]').text("Crear Vehículo"),a("#wrap-vehiculos .wrap-listado-vehiculos").hide(),a("#wrap-vehiculos .wrap-gestion-vehiculos").show()}),a(document).on("click",'#wrap-vehiculos .wrap-gestion-vehiculos button[type="button"]',function(e){a("#vehiculo-form")[0].reset(),a("#vehiculo-id").text("").val(""),a("#select-rolesusuario").val(null).trigger("change"),a("#wrap-vehiculos .wrap-gestion-vehiculos").hide(),a("#wrap-vehiculos .wrap-listado-vehiculos").show()}),a(document).on("click","#wrap-vehiculos .wrap-listado-vehiculos .edit-vehiculo",function(e){a('#wrap-vehiculos .wrap-gestion-vehiculos button[type="submit"]').text("Editar Vehículo"),a("#wrap-vehiculos .wrap-gestion-vehiculos .title").text("Editar Vehículo"),a("#wrap-vehiculos .wrap-listado-vehiculos").hide(),a("#wrap-vehiculos .wrap-gestion-vehiculos").show();var o=a(this).data("id");a("#vehiculo-form #vehiculo-id").val(o),a("body").addClass("actloader"),a.ajax({url:vehiculoAjax.ajaxurl,method:"POST",data:{action:"load_vehiculo_data",post_id:o},success:function(e){e.success?(a.each(e.data,function(e,o){"tipo_de_vehiculo"===e||"propietario_de_vehiculo"===e||"conductor_del_vehiculo"===e?a("#"+e).val(o).trigger("change"):a("#"+e).val(o)}),a("body").removeClass("actloader")):(a("body").removeClass("actloader"),Swal.fire({title:"Algo ha ocurrido!",text:e.data.message,icon:"error",confirmButtonText:"Aceptar"}))}})}),a(document).on("click","#wrap-vehiculos .wrap-listado-vehiculos .delete-vehiculo",function(e){e.preventDefault();let o=a(this).data("id");Swal.fire({title:"¿Estás seguro?",text:"Esta acción eliminará el Vehículo de forma permanente.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&a.ajax({url:vehiculoAjax.ajaxurl,method:"POST",data:{action:"delete_vehiculo",post_id:o},success:function(e){e.success?Swal.fire("¡Eliminado!","El vehiculo ha sido eliminado exitosamente.","success").then(()=>{var e=vehiculoAjax.plugin_url+"includes/parts/panel/vehiculo.php";a.ajax({url:e,method:"GET",success:function(e){a("#informacion").html(e),initVehiculos()},error:function(){a("#informacion").html("<p>Error al cargar el contenido. Intenta nuevamente.</p>")}})}):Swal.fire("Error",e.data.message||"No se pudo eliminar el vehículo.","error")},error:function(){Swal.fire("Error","Hubo un problema al intentar eliminar el vehículo.","error")}})})}),a(document).on("focusin","#vehiculo-form",function(){a(this).validate({rules:{placa_vehiculo:{required:!0},tipo_de_vehiculo:{required:!0},modelo_vehiculo:{required:!0},cantidad_pasajeros_vehiculo:{required:!0,number:!0},marca_vehiculo:{required:!0},serial_vehiculo:{required:!0},chasis_vehiculo:{required:!0},fecha_vencimiento_soat:{required:!0},fecha_vencimiento_tecno_mecanica:{required:!0},propietario_de_vehiculo:{required:!0},conductor_del_vehiculo:{required:!0}},messages:{placa_vehiculo:"Ingresa la placa del Vehículo",tipo_de_vehiculo:"Ingresa el tipo del Vehículo",modelo_vehiculo:"Ingresa el modelo del Vehículo",cantidad_pasajeros_vehiculo:{required:"Ingresa la cantidad del Vehículo",number:"La cantidad debe ser en números"},marca_vehiculo:"Ingresa la marca del Vehículo",serial_vehiculo:"Ingresa el # de serial del Vehículo",chasis_vehiculo:"Ingresa el # de chasis del Vehículo",fecha_vencimiento_soat:{required:"Este campo es obligatorio"},fecha_vencimiento_tecno_mecanica:{required:"Este campo es obligatorio"},propietario_de_vehiculo:"Ingresa el Propietario del Vehículo",conductor_del_vehiculo:"Ingresa el Conductor del Vehículo"},submitHandler:function(e){e=new FormData(e);e.append("action","create_vehiculo"),a.ajax({url:vehiculoAjax.ajaxurl,type:"POST",data:e,contentType:!1,processData:!1,beforeSend:function(){a("body").addClass("actloader")},success:function(e){a("body").removeClass("actloader"),e.success?Swal.fire({title:"¡Éxito!",text:e.data.message,icon:"success",confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&(a("#vehiculo-form")[0].reset(),e=vehiculoAjax.plugin_url+"includes/parts/panel/vehiculo.php",a.ajax({url:e,method:"GET",success:function(e){a("#informacion").html(e),initVehiculos()},error:function(){a("#informacion").html("<p>Error al cargar el contenido. Intenta nuevamente.</p>")}}))}):Swal.fire({title:"Algo ha ocurrido!",text:e.data.message,icon:"error",confirmButtonText:"Aceptar"})},error:function(){a("body").removeClass("actloader"),Swal.fire({title:"¡Error!",text:"Hubo un problema al procesar el formulario. Por favor intenta nuevamente.",icon:"error",confirmButtonText:"Aceptar"})}})}})})});
//# sourceMappingURL=vehiculos.js.map
